:HIDDEN:
#+CATEGORY: guix
#+PROPERTY: header-args :results silent
:END:
#+TITLE: Guix Configuration

Declaring packages to install on user profile

* Emacs
#+BEGIN_SRC scheme :tangle ./emacs.scm
(use-modules (gnu packages)
             (guix profiles)
             (ice-9 match)
             (ice-9 pretty-print)
             (guix git-download)
             (gnu packages emacs-xyz))

;;; HELPER PROCEDURES
;;; =================

(define (profile-manifest->package-names)
  "Return a list with the names of the packages installed in the user
   profile (see %user-profile-directory in the (guix profiles) module)."
  (map manifest-entry-name
       (manifest-entries (profile-manifest %user-profile-directory))))

;;; PACKAGES
;;; ========

(define packages
  (append (profile-manifest->package-names)
        (list "git")))

(define emacs-packages
  (append (profile-manifest->package-names)
          (list "emacs"
                "emacs-guix"
                "emacs-exwm"
                "emacs-xelb"
                "emacs-exwm-edit"
                "emacs-hydra"
                "emacs-transient"
                "emacs-howm"
                "emacs-emms"
                "emacs-circe"
                "emacs-pdf-tools"
                "emacs-elfeed"
                "emacs-elfeed-org"
                "emacs-dumb-jump"
                "emacs-json-mode"
                "emacs-web-beautify"
                "emacs-web-mode"
                "emacs-async"
                "emacs-dash"
                "emacs-f"
                "emacs-s"
                "emacs-ht"
                "emacs-a"
                "emacs-request"
                "emacs-exec-path-from-shell"
                "emacs-desktop-environment"
                "emacs-all-the-icons"
                "emacs-which-key"
                "emacs-discover-my-major"
                "emacs-helpful"
                "emacs-better-defaults"
                "emacs-visual-fill-column"
                "emacs-ace-window"
                "emacs-transpose-frame"
                "emacs-dired-hacks"
                "emacs-dired-rsync"
                "emacs-avy"
                "emacs-goto-chg"
                "emacs-expand-region"
                "emacs-smartparens"
                "emacs-edit-indirect"
                "emacs-flycheck"
                "emacs-wgrep"
                "emacs-anzu"
                "emacs-counsel-projectile"
                "emacs-ivy"
                "emacs-ivy-rich"
                "emacs-smex"
                "emacs-company"
                "emacs-company-quickhelp"
                "emacs-prescient"
                "emacs-crux"
                "emacs-keyfreq"
                "emacs-elmacro"
                "emacs-projectile"
                "emacs-ibuffer-projectile"
                "emacs-magit"
                "emacs-git-timemachine"
                "emacs-gitpatch"
                "emacs-org"
                "emacs-org-contrib"
                "emacs-org-pomodoro"
                "emacs-markdown-mode"
                "emacs-nov-el"
                "emacs-scratch-el"
                "emacs-yasnippet"
                "emacs-yasnippet-snippets"
                "emacs-auto-yasnippet"
                "emacs-htmlize"
                "emacs-base16-theme"
                )))



;;; MANIFEST
;;; ========
(packages->manifest (map specification->package packages))
(packages->manifest (map specification->package emacs-packages))



#+END_SRC

* undo-tree
#+BEGIN_SRC scm :tangle ./emacs-undo-tree.scm
(define-module (gnu packages emacs-undo-tree)
	#:use-module (gnu packages emacs)
  #:use-module ((guix licenses) #:prefix license:)
  #:use-module (guix packages)
  #:use-module (guix download)
  #:use-module (guix git-download)
  #:use-module (guix gexp)
  #:use-module (guix monads)
  #:use-module (guix store)
  #:use-module (guix build-system gnu)
  #:use-module (guix build-system emacs)
  #:use-module (guix build-system glib-or-gtk)
  #:use-module (guix build-system trivial)
  #:use-module (gnu packages)
  #:use-module (gnu packages guile)
  #:use-module (gnu packages gtk)
  #:use-module (gnu packages gnome)
  #:use-module (gnu packages ncurses)
  #:use-module (gnu packages texinfo)
  #:use-module (gnu packages tls)
  #:use-module (gnu packages pkg-config)
  #:use-module (gnu packages xorg)
  #:use-module (gnu packages lesstif)
  #:use-module (gnu packages image)
  #:use-module (gnu packages linux)
  #:use-module (gnu packages version-control)
  #:use-module (gnu packages imagemagick)
  #:use-module (gnu packages w3m)
  #:use-module (gnu packages wget)
  #:use-module (gnu packages autotools)
  #:use-module (gnu packages base)
  #:use-module (gnu packages compression)
  #:use-module (gnu packages xml)
  #:use-module (gnu packages glib)
  #:use-module (gnu packages acl)
  #:use-module (gnu packages package-management)
  #:use-module (gnu packages perl)
  #:use-module (gnu packages pdf)
  #:use-module (gnu packages scheme)
  #:use-module (gnu packages xiph)
  #:use-module (gnu packages mp3)
  #:use-module (guix utils)
  #:use-module (srfi srfi-1))

(define-public emacs-undo-tree-temp
  (package
    (name "emacs-undo-tree")
    (version "20140509.522")
    ;; (version "0.6.5")
    (source
     (origin
       (method url-fetch)
       (uri (string-append
             "http://melpa.org/packages/undo-tree-"
             version ".el"))
       (sha256
        (base32
         "0s6fic6qflc8nclhdbgh278zv65l2ab3vr53ydh08qbwhsiv3sq2"))))
    (build-system emacs-build-system)
    (home-page "http://www.dr-qubit.org/tags/computing-code-emacs.html")
    (synopsis "Treat undo history as a tree")
    (description
     "Instead of treating undo/redo as a linear sequence of changes,
undo-tree-mode treats undo history as a branching tree of changes, similar to
the way Vim handles it.  This makes it substantially easier to undo and redo
any change, while preserving the entire history of past states.  The undo-tree
visualizer is particularly helpful in complex cases.  An added side bonus is
that undo history can in some cases be stored more efficiently, allowing more
changes to accumulate before Emacs starts discarding history.  Undo history can
be saved persistently across sessions with Emacs 24.3 and later.  It also
sports various other nifty features: storing and restoring past buffer states
in registers, a diff view of the changes that will be made by undoing, and
probably more besides.")
    (license license:gpl3+)))

#+END_SRC

* Packages to build from source
#+BEGIN_SRC text
emacs-org-cliplink
emacs-org-download
emacs-org-journal
emacs-toc-org
emacs-ox-gfm
emacs-browse-kill-ring
emacs-persistent-scratch
emacs-unkillable-scratch
emacs-buffer-move
emacs-windmove
emacs-boon
emacs-objed
emacs-hyperbole
emacs-torus
 #+END_SRC
